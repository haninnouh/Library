(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{106:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(22),o=a.n(r),s=(a(60),a.p,a(61),a(12)),j=a.n(s),i=a(7),l=a(6),b=a(18),u=a(14),d=a(43),O=a(27),h=a(37),g=a(24),x=a(1);var m=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1],r=localStorage.getItem("token");return console.log(r),r&&Object(g.a)(r,{payload:!0}).exp<Date.now()/1e3&&localStorage.removeItem("token"),Object(n.useEffect)((function(){j.a.get("/allAuthors").then((function(e){console.log(e),c(e.data)}))}),[]),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(O.a,{children:Object(x.jsx)(h.a,{xs:1,md:2,className:"g-4",children:a.map((function(e){return Object(x.jsxs)(u.a,{style:{width:"18rem"},children:[Object(x.jsx)(u.a.Img,{variant:"top",src:e.authorImage}),Object(x.jsxs)(u.a.Body,{children:[Object(x.jsx)(u.a.Title,{children:e.name})," ",Object(x.jsx)(b.b,{to:"/AuthDetails/".concat(e._id),children:Object(x.jsx)(d.a,{variant:"primary",children:"More details"})})]})]})}))})})})},p=a(54),f=a.n(p);a(101);var v=function(){var e,t=Object(i.g)().id,a=Object(n.useState)(),c=Object(l.a)(a,2),r=c[0],o=c[1],s=Object(n.useState)(!1),b=Object(l.a)(s,2),d=b[0],m=b[1],p=Object(n.useState)(!0),v=Object(l.a)(p,2),S=v[0],C=v[1],k=Object(n.useState)(""),w=Object(l.a)(k,2),y=w[0],I=w[1],F=Object(n.useState)(""),D=Object(l.a)(F,2),N=D[0],T=D[1],A=Object(n.useState)(""),B=Object(l.a)(A,2),E=B[0],q=B[1],L=Object(n.useState)(""),P=Object(l.a)(L,2),J=P[0],M=P[1],_=localStorage.getItem("token");return _&&(e=Object(g.a)(_,{payload:!0}),console.log(e),e.exp<Date.now()/1e3&&localStorage.removeItem("token")),Object(n.useEffect)((function(){j.a.get("/Authors/".concat(t)).then((function(e){o(e.data),C(!1)}))}),[]),S?Object(x.jsxs)("div",{children:[Object(x.jsx)(f.a,{type:"TailSpin",color:"#00BFFF",height:100,width:100,timeout:5e3}),Object(x.jsx)("p",{children:"loading..."})]}):Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(O.a,{children:[Object(x.jsxs)(u.a,{style:{width:"18rem"},children:[Object(x.jsx)(u.a.Img,{variant:"top",src:r.authorImage}),Object(x.jsxs)(u.a.Body,{children:[Object(x.jsx)(u.a.Title,{children:r.name})," ",r.age?Object(x.jsxs)(u.a.Title,{children:["age: ",r.age]}):Object(x.jsx)(x.Fragment,{})]})]}),function(){if(void 0!=e){if(console.log("decodedData is not undefined"),e.id==t)return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{className:"btn btn-primary",onClick:function(e){!function(e){e.preventDefault(),m(!0),T(r.name),M(r.authorImage),q(r.nationality)}(e)},children:" Edit information "}),d?Object(x.jsxs)("form",{children:[Object(x.jsx)("input",{value:N,placeholder:"name",onChange:function(e){return T(e.target.value)}}),Object(x.jsx)("input",{value:J,placeholder:"image",onChange:function(e){return M(e.target.value)}}),Object(x.jsx)("input",{value:E,placeholder:"nationality",onChange:function(e){return q(e.target.value)}}),Object(x.jsx)("input",{placeholder:"password",onChange:function(e){return I(e.target.value)}}),Object(x.jsx)("button",{onClick:function(e){!function(e){e.preventDefault(),j.a.patch("/authors/".concat(t),{name:N,password:y,nationality:E,authorImage:J}).then((function(e){console.log(e),o(e.data)})),m(!1)}(e)},children:"Save"})]}):Object(x.jsx)(x.Fragment,{}),Object(x.jsxs)("form",{children:[Object(x.jsx)("input",{placeholder:"book title"}),Object(x.jsx)("input",{placeholder:"book pages"}),Object(x.jsx)("input",{placeholder:"book image"}),Object(x.jsx)("button",{onClick:function(e){!function(e){e.preventDefault();var a=e.target.form[0].value,n=e.target.form[1].value,c=e.target.form[2].value;j.a.post("/book/".concat(t),{title:a,pages:n,bookImg:c}).then((function(e){console.log(e),o(e.data)}))}(e)},children:"Add book"})]})]})}else console.log("no sign")}(),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)(h.a,{xs:1,md:4,className:"g-4",children:r.books.map((function(a){return Object(x.jsx)("div",{children:Object(x.jsxs)(u.a,{style:{width:"18rem"},children:[Object(x.jsx)(u.a.Title,{children:a.title})," ",Object(x.jsx)(u.a.Img,{variant:"top",src:a.bookImage}),e&&e.id==t?Object(x.jsx)("button",{className:"btn btn-danger",onClick:function(e){!function(e,a){e.preventDefault(),j.a.delete("/book/".concat(t,"/").concat(a)).then((function(e){o(e.data)}))}(e,a._id)},children:"Delete"}):Object(x.jsx)(x.Fragment,{})]})})}))})]})})},S=a(20);var C=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),o=Object(l.a)(r,2),s=o[0],b=o[1],u=Object(n.useState)(""),d=Object(l.a)(u,2),O=d[0],h=d[1],m=Object(n.useState)(""),p=Object(l.a)(m,2),f=p[0],v=p[1],C=Object(n.useState)(""),k=Object(l.a)(C,2),w=k[0],y=k[1],I=Object(n.useState)(""),F=Object(l.a)(I,2),D=F[0],N=F[1],T=Object(n.useState)(""),A=Object(l.a)(T,2),B=A[0],E=A[1],q=Object(i.f)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(S.a,{children:[Object(x.jsx)("h2",{children:"Sign up"}),Object(x.jsx)(S.a.Control,{placeholder:"author name",onChange:function(e){return h(e.target.value)}}),Object(x.jsx)(S.a.Control,{placeholder:"author nationality",onChange:function(e){return v(e.target.value)}}),Object(x.jsx)(S.a.Control,{placeholder:"author image",onChange:function(e){return y(e.target.value)}}),Object(x.jsx)(S.a.Control,{type:"text",name:"email",placeholder:"email",required:!0,onChange:function(e){return c(e.target.value)}}),Object(x.jsx)("div",{className:"email error",children:D}),Object(x.jsx)(S.a.Control,{type:"password",name:"password",placeholder:"password",required:!0,onChange:function(e){return b(e.target.value)}}),Object(x.jsx)("div",{className:"password error",children:B}),Object(x.jsx)("button",{className:"btn btn-success",onClick:function(e){return function(e){e.preventDefault(),j.a.post("/signup",{email:a,password:s,name:O,nationality:f,authorImage:w}).then((function(e){if(console.log(e.data),e.data.errors&&(console.log(e.data.errors),N(e.data.errors.email),E(e.data.errors.password)),e.data.author){var t=e.data.token;Object(g.a)(t),localStorage.setItem("token",t),q("/")}}))}(e)},children:"Sign up"})]})})};var k=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),o=Object(l.a)(r,2),s=o[0],b=o[1],u=Object(n.useState)(""),d=Object(l.a)(u,2),O=d[0],h=d[1],m=Object(n.useState)(""),p=Object(l.a)(m,2),f=p[0],v=p[1],C=Object(i.f)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(S.a,{children:[Object(x.jsx)("h2",{children:"Sign in"}),Object(x.jsx)(S.a.Control,{type:"text",name:"email",placeholder:"Email",required:!0,onChange:function(e){return c(e.target.value)}}),Object(x.jsx)("div",{className:"email error",children:O}),Object(x.jsx)(S.a.Control,{type:"password",name:"password",placeholder:"Password",required:!0,onChange:function(e){return b(e.target.value)}}),Object(x.jsx)("div",{className:"password error",children:f}),Object(x.jsx)("button",{className:"btn btn-success",onClick:function(e){return function(e){e.preventDefault(),j.a.post("/signin",{email:a,password:s}).then((function(e){if(console.log(e.data),e.data.errors&&(console.log(e.data.errors),h(e.data.errors.email),v(e.data.errors.password)),e.data.author){console.log(e.data);var t=e.data.token,a=Object(g.a)(t);console.log(t),console.log(a),localStorage.setItem("token",t),C("/")}}))}(e)},children:"Sign in"})]})})},w=a(32),y=a(41);var I=function(){return Object(x.jsx)(w.a,{bg:"light",expand:"lg",children:Object(x.jsxs)(O.a,{children:[Object(x.jsx)(w.a.Brand,{children:Object(x.jsx)(b.b,{to:"/",children:"Home"})}),Object(x.jsx)(w.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(x.jsx)(w.a.Collapse,{id:"basic-navbar-nav",children:Object(x.jsxs)(y.a,{className:"me-auto",children:[Object(x.jsx)(y.a.Link,{children:Object(x.jsx)(b.b,{to:"/signin",children:"signin"})}),Object(x.jsx)(y.a.Link,{children:Object(x.jsx)(b.b,{to:"/signup",children:"signup"})})]})})]})})};var F=function(){return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(I,{}),Object(x.jsxs)(i.c,{children:[Object(x.jsx)(i.a,{exact:!0,path:"/",element:Object(x.jsx)(m,{})}),Object(x.jsx)(i.a,{path:"/AuthDetails/:id",element:Object(x.jsx)(v,{})}),Object(x.jsx)(i.a,{path:"/Signup",element:Object(x.jsx)(C,{})}),Object(x.jsx)(i.a,{path:"/Signin",element:Object(x.jsx)(k,{})})]})]})},D=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,108)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;a(e),n(e),c(e),r(e),o(e)}))};a(105);o.a.render(Object(x.jsx)(b.a,{children:Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(F,{})})}),document.getElementById("root")),D()},60:function(e,t,a){},61:function(e,t,a){}},[[106,1,2]]]);
//# sourceMappingURL=main.3dda0d73.chunk.js.map